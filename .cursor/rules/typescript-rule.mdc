---
globs: *.ts,*.tsx
---

# TypeScript 가이드라인

## Import Alias

### 항상 @ Alias 사용
- 루트에서 import할 때 `@/` 사용
- `tsconfig.json` paths에서 설정

```typescript
// 좋음
import { Button } from "@/components/ui/button"
import { formatDate } from "@/lib/utils"

// 나쁨
import { Button } from "../../components/ui/button"
```

## 타입 정의

### 위치
- 전역 타입은 `/types` 폴더에
- 컴포넌트별 타입은 같은 파일 또는 같은 위치에
- 공유 타입은 `types/index.ts`에

### 네이밍 규칙
- Interface: PascalCase (예: `User`, `BlogPost`)
- Type: PascalCase (예: `ButtonVariant`, `Theme`)
- Enum: PascalCase (예: `UserRole`, `Status`)

### Props 타입 패턴

```typescript
// 컴포넌트 props를 위한 인터페이스
interface ButtonProps {
  variant?: 'primary' | 'secondary'
  size?: 'sm' | 'md' | 'lg'
  children: React.ReactNode
  onClick?: () => void
}

// HTML 속성 확장
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string
  error?: string
}

// PropsWithChildren 사용
type CardProps = React.PropsWithChildren<{
  title: string
  description?: string
}>
```

## 타입 안전성

### 'any' 사용 피하기
- 타입이 진짜 알 수 없는 경우 `unknown` 사용
- 적절한 제네릭 사용
- 명시적 타입 정의

```typescript
// 좋음
function fetchData<T>(url: string): Promise<T> {
  return fetch(url).then(res => res.json())
}

// 나쁨
function fetchData(url: string): Promise<any> {
  return fetch(url).then(res => res.json())
}
```

### Null 안전성
- 옵셔널 체이닝 사용: `user?.name`
- Nullish 병합 사용: `user?.name ?? 'Guest'`
- 필요시 명시적 null 체크

## 서버 컴포넌트

### 비동기 컴포넌트 타입
```typescript
// async가 있는 서버 컴포넌트
async function ServerComponent({ id }: { id: string }) {
  const data = await fetchData(id)
  return <div>{data.title}</div>
}
```

## API 라우트 타입

### Request/Response 타이핑
```typescript
// app/api/posts/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  const body: CreatePostInput = await request.json()
  
  return NextResponse.json<ApiResponse>({
    success: true,
    data: post
  })
}
```

## 공통 패턴

### Search Params
```typescript
type SearchParams = { [key: string]: string | string[] | undefined }

async function Page({ searchParams }: { searchParams: SearchParams }) {
  const query = searchParams.q
}
```

### Route Params
```typescript
type Params = { slug: string }

async function Page({ params }: { params: Params }) {
  const { slug } = params
}
```

## 유틸리티 타입
- 내장 유틸리티 타입 사용: `Partial<T>`, `Pick<T>`, `Omit<T>`, `Required<T>`
- 필요시 커스텀 유틸리티 타입 생성
- 재사용 가능한 타입은 `types/index.ts`에서 export